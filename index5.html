<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Contour finder</title>
  <link rel="stylesheet" href="css/normalize.css">
  <script src="js/jquery-1.10.1.min.js" type="text/javascript"></script>
  <script src="js/ContourFinder.js" type="text/javascript"></script>
  <script>
  
		var image;
		var imageCtx;
		var logo
		var foregroudColor = 255;
		var backgroundColor = 0;
		//var threshold = 160; //doodle3D logo
		var threshold = 62; //arcade
		//var threshold = 120; //circus
		var contourFinder = new ContourFinder();
		var startTime = 0;
		$( document ).ready(function() {
		  console.log( "ready!" );
		  image = document.getElementById('image');
			imageCtx = image.getContext('2d');
			
			fillImage();
			
			$(document).click(onClick);
			$(document).bind("touchstart",onClick);
		});
		function onClick() {
			startTime = Date.now();
			// ToDo: try edge detection filter
			// ToDo: preprocess: threshold
			contourFinder.findContours(image,foregroudColor,backgroundColor,threshold);
			
			alert(Date.now()-startTime);
		}
		function fillImage() {
			//imageCtx.clearRect (0,0,image.width,image.height);
		
			logo = new Image();
	    logo.onload = draw;
	    //logo.src = "images/logo.png";
	    logo.src = "images/arcade.jpg";
			//logo.src = "images/circus.jpg";
		}
		function draw() {
			imageCtx.drawImage(logo, 0, 0); 
		}
		
		function drawContours() {
			
		}
  	
  </script>
</head>
<body>
	<canvas id="image" width="1024" height="768"></canvas>
</body>
</html>